<!DOCTYPE html>
<html lang="ru" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>CloudNET — Secure DevOps Cloud Storage</title>
    <meta name="description" content="CloudNET — защищённое облачное хранилище для DevOps и ИБ. Шифрование, CI/CD интеграция, аудит безопасности.">
    <meta name="keywords" content="secure cloud, devops storage, infosec cloud, encryption, audit logs, cloud native">
    
    <!-- Open Graph / Twitter -->
    <meta property="og:title" content="CloudNET — Secure DevOps Storage">
    <meta property="og:description" content="Безопасное хранилище для разработчиков и ИБ-специалистов.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cloudnet.ru">
    <meta property="og:image" content="https://cloudnet.ru/images/og-secure.jpg">
    
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://cloudnet.ru">
    
    <!-- JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "CloudNET",
        "applicationCategory": "SecureCloudStorage",
        "operatingSystem": "Web, iOS, Android, Linux, Windows, macOS",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "RUB"},
        "aggregateRating": {"@type": "AggregateRating", "ratingValue": "4.9", "ratingCount": "4500"},
        "featureList": ["End-to-End Encryption", "Audit Logs", "CI/CD Integration", "RBAC Access", "Threat Detection"]
    }
    </script>
    
    <!-- Preconnects -->
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Font Awesome -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style" onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"></noscript>
    
    <!-- Основной CSS -->
    <link rel="preload" href="./css/style.css" as="style" onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="./css/style.css"></noscript>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js" defer></script> <!-- Добавлен для storage -->
    
    <script src="./js/firebase-config.js" defer></script>
    <script type="module" src="./js/main.js" defer></script>
</head>
<body>

    <div class="auth-check" id="authCheck">
        <div class="spinner"></div>
        <p>Инициализация системы...</p>
    </div>

    <div class="app" id="app" style="display: none;">
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <i class="fas fa-shield-alt"></i> <!-- Изменил на щит для ИБ-тематики -->
                <span>CloudNET Secure</span>
            </div>

            <div class="user-info" id="userInfo">
                <i class="fas fa-user-shield fa-2x"></i> <!-- ИБ-иконка -->
                <div>
                    <div id="userName"></div>
                    <div id="userEmail"></div>
                </div>
            </div>

            <button class="new-btn" id="newBtn">
                <i class="fas fa-plus"></i> Deploy New
            </button>

            <div class="new-menu" id="newMenu">
                <button onclick="createFolder()"><i class="fas fa-folder"></i> Create Folder</button>
                <button onclick="triggerFileUpload()"><i class="fas fa-upload"></i> Upload Artifact</button>
            </div>

            <nav class="nav-menu">
                <a href="#" class="active" onclick="loadFiles('/'); return false;">
                    <i class="fas fa-server"></i> My Pipeline
                </a>
                <a href="/test-lab" rel="noopener noreferrer">
                    <i class="fas fa-flask-vial"></i> Test Lab
                </a>
                <a href="/ai-agent-test" rel="noopener noreferrer">
                    <i class="fas fa-brain"></i> AI Agent Test
                </a>
            </nav>

            <div class="storage-info">
                <div class="storage-bar">
                    <div class="storage-used" id="storageUsedBar"></div>
                </div>
                <div id="storageText">Secure Storage: Loading...</div>
            </div>

            <button onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout Securely
            </button>
        </aside>

        <!-- Main -->
        <main class="main-content">
            <header class="toolbar">
                <nav class="breadcrumb" id="breadcrumb">
                    <a href="#" onclick="navigateTo('/'); return false;">Root Pipeline</a>
                </nav>

                <div class="toolbar-actions">
                    <button onclick="triggerFileUpload()" title="Upload Artifact"><i class="fas fa-upload"></i></button>
                    <button onclick="createFolder()" title="Create Secure Folder"><i class="fas fa-folder-plus"></i></button>
                    <button onclick="loadFiles(currentPath)" title="Refresh Audit"><i class="fas fa-sync-alt"></i></button>
                </div>
            </header>

            <div class="info-badge">
                <i class="fas fa-lock"></i> End-to-End Encrypted & Audited
            </div>

            <div class="drop-zone" id="dropZone">
                <i class="fas fa-cloud-arrow-up fa-3x"></i>
                <p>Drop Artifacts Here or Click to Upload Securely</p>
            </div>

            <div class="files-container">
                <table class="files-table" aria-label="Secure Files and Folders List">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Name</th>
                            <th>Size</th>
                            <th>Modified</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="fileList"></tbody>
                </table>
            </div>

            <input type="file" id="fileInput" multiple style="display:none">
        </main>
    </div>

    <!-- Folder Modal -->
    <div class="modal" id="folderModal">
        <div class="modal-content">
            <h3>Create Secure Folder</h3>
            <input type="text" id="folderName" placeholder="Folder Name">
            <div class="modal-actions">
                <button class="cancel" onclick="closeFolderModal()">Cancel</button>
                <button class="create" onclick="createFolderConfirm()">Create</button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
    </button>
    <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="closeMobileMenu()"></div>

</body>
</html>
